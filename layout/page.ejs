<div class="page-body page-shadow">
    <section class="page">
        <div class="page-title" <% if(page.font) { %> style="font: <%= page.font %> <% } %>">
            <%- page.title || page.link %>
        </div>
        <p class="blog-page-info">
            <span><%= page.date.format(config.date_format) %></span>
            <% if(page.author) { %>
            | <span><%- page.author %></span>  
            <% } %>
        </p>
        <%- page.content %>

        <% if(page.comments) { %>
            <% if(theme.comments.utteranc.enable) { %>
                <script src="https://utteranc.es/client.js"
                    repo="<%= theme.comments.utteranc.repo %>"
                    issue-term="<%= page.title %>"
                    theme="<%= theme.comments.utteranc.theme %>"
                    crossorigin="anonymous"
                    async>
                </script>
            <% } %>
            <% if(theme.comments.changyan.enable) { %>
                <div id="SOHUCS" sid="<%= hash(page.title) %>" class="clear-markdwon-a"></div>
                <script charset="utf-8" type="text/javascript" src="https://cy-cdn.kuaizhan.com/upload/changyan.js" ></script>
                <script type="text/javascript">
                    window.changyan.api.config({
                        appid: '<%= theme.comments.changyan.appid %>',
                        conf: '<%= theme.comments.changyan.conf %>'
                    });
                </script>
            <% } %>
            <% if(theme.comments.valine.enable) { %>
            <div id="vcomments" class="clear-markdwon-a"></div>
            <script src='//unpkg.com/valine/dist/Valine.min.js'></script>
            <script>
                new Valine({
                    el: "#vcomments",
                    app_id: "<%= theme.comments.valine.app_id %>",
                    app_key: "<%= theme.comments.valine.app_key %>",
                    avatar: "<%= theme.comments.valine.avatar %>",
                    placeholder: "<%= theme.comments.valine.placeholderr %>",
                    visitor: "<%= theme.comments.valine.visitor %>", // 阅读量统计
                });
            </script>
            <% } %>
            <% if(theme.comments.disqus.enable) { %>
                <div id="disqus_thread" class="clear-markdwon-a"></div>
                <script>
                    var disqus_config = function () {
                        this.page.url = document.URL;
                        this.page.identifier = document.title;
                    };
                    (function() { 
                        var d = document, s = d.createElement('script');
                        s.src = '<%= theme.comments.disqus.mainJs %>';
                        s.setAttribute('data-timestamp', +new Date());
                        (d.head || d.body).appendChild(s);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

                <a class="disqus-comment-count"></a>
                <script id="dsq-count-scr" src="<%= theme.comments.disqus.countJs %>" async></script>
            <% } %>
            <% if(theme.comments.gitalk.enable) { %>
                <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
                <div id="gitalk-container" class="clear-markdwon-a"></div>
                <script>
                    var gitalk = new Gitalk({
                        clientID: '<%= theme.comments.gitalk.clientID %>',
                        clientSecret: '<%= theme.comments.gitalk.clientID %>',
                        repo: '<%= theme.comments.gitalk.repo %>',
                        owner: '<%= theme.comments.gitalk.owner %>',
                        admin: ['<%= theme.comments.gitalk.owner %>'],
                        id: location.pathname,
                        distractionFreeMode: false,
                        labels: ['Gitalk'],
                        language: "<%= theme.comments.gitalk.language %>"
                    })
                    gitalk.render('gitalk-container')
                </script>
            <% } %>
            <% if(theme.comments.gitment.enable) { %>
                <div id="gitment-container" class="clear-markdwon-a"></div>
                <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
                <script>
                    var gitment = new Gitment({
                        id: location.pathname,
                        owner: '<%= theme.comments.gitalk.owner %>',
                        repo: '<%= theme.comments.gitalk.repo %>',
                        oauth: {
                            client_id: '<%= theme.comments.gitalk.clientID %>',
                            client_secret: '<%= theme.comments.gitalk.clientID %>',
                        },
                    })
                    gitment.render('gitment-container')
                </script>
            <% } %>
            <% if(theme.comments.vssue.enable) { %>
                <div id="vssue"></div>
                <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.min.js"></script>
                <script src="https://unpkg.com/vssue@1.4.8/dist/vssue.<%= theme.comments.vssue.platform %>.min.js"></script>
                <script>
                new Vue({
                    el: '#vssue',
                    data: {
                    title: location.pathname,
                    options: {
                        clientId: '<%= theme.comments.gitalk.clientID %>',
                        clientSecret: '<%= theme.comments.gitalk.clientID %>',
                        repo: '<%= theme.comments.gitalk.repo %>',
                        owner: '<%= theme.comments.gitalk.owner %>',
                    },
                    },
                    template: `<vssue :title="title" :options="options"></vssue>`,
                })
                </script>
            <% } %>
        <% } %>

    </section>
</div>
